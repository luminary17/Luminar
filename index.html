<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Luminary - Education Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-page: #FFF0DB;
            --bg-card: #FFFFFF;
            --text-main: #000000;
            --text-on-card: #000000;
            --accent: #D9B99B;
            --card-shadow: 0 4px 25px rgba(0,0,0,0.05);
        }

        body {
            margin: 0;
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-page);
            color: var(--text-main);
            min-height: 100vh;
            transition: 0.4s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .top-nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 75px;
            background: #FFFFFF;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 20px rgba(0,0,0,0.03);
            z-index: 1000;
            padding: 0 20px;
            box-sizing: border-box;
        }

        .nav-content {
            width: 100%;
            max-width: 1000px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .top-nav .logo {
            color: #D9B99B;
            font-weight: 800;
            font-size: 24px;
            cursor: pointer;
            letter-spacing: -1px;
        }

        .nav-links {
            display: flex;
            gap: 10px;
        }

        .nav-item {
            background: none;
            border: none;
            font-family: inherit;
            font-size: 13px;
            font-weight: 700;
            color: #000000;
            cursor: pointer;
            opacity: 0.5;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 8px;
        }

        .nav-item.active {
            opacity: 1;
            border-bottom: 3px solid #D9B99B;
        }

        .nav-item svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        .container {
            width: 94%;
            max-width: 1000px;
            padding-top: 100px;
            box-sizing: border-box;
        }

        .view {
            display: none;
            width: 100%;
            animation: fadeIn 0.4s ease;
        }

        .view.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .reader-view {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #FFF0DB;
            z-index: 2000;
            display: none;
            flex-direction: column;
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
            }
            to {
                transform: translateY(0);
            }
        }

        .reader-header {
            height: 70px;
            display: flex;
            align-items: center;
            padding: 0 20px;
            background: #FFFFFF;
            box-shadow: 0 2px 15px rgba(0,0,0,0.02);
            color: #000000;
        }

        .back-arrow {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background: rgba(0,0,0,0.02);
            border-radius: 50%;
            margin-right: 15px;
        }

        .back-arrow svg {
            width: 24px;
            height: 24px;
            fill: #000000;
        }

        .reader-body {
            flex: 1;
            overflow-y: auto;
            padding: 40px 20px;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .page-content {
            max-width: 600px;
            width: 100%;
            font-size: 19px;
            line-height: 1.8;
            color: #000000;
            text-align: justify;
            transition: transform 0.4s ease, opacity 0.4s ease;
        }

        .page-enter-right {
            transform: translateX(50px);
            opacity: 0;
        }

        .page-enter-left {
            transform: translateX(-50px);
            opacity: 0;
        }

        .page-active {
            transform: translateX(0);
            opacity: 1;
        }

        .touch-zone-left, .touch-zone-right {
            position: absolute;
            top: 0;
            width: 30%;
            height: 100%;
            z-index: 10;
            cursor: pointer;
        }

        .touch-zone-left {
            left: 0;
        }

        .touch-zone-right {
            right: 0;
        }

        .search-bar {
            background: #FFFFFF;
            border-radius: 18px;
            height: 55px;
            display: flex;
            align-items: center;
            padding: 0 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.02);
            margin-bottom: 25px;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .search-bar input {
            background: none;
            border: none;
            width: 100%;
            outline: none;
            font-size: 16px;
            color: #000000;
            font-family: inherit;
        }

        .search-bar input::placeholder {
            color: #666666;
        }

        .hero {
            width: 100%;
            height: 380px;
            border-radius: 30px;
            background-size: cover;
            background-position: center;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 40px;
            box-sizing: border-box;
            color: white;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: 0.5s;
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
        }

        .hero-text {
            position: relative;
            z-index: 2;
        }

        .hero-text h2 {
            margin: 0;
            font-size: 36px;
            font-weight: 800;
            color: white;
        }

        .hero-text p {
            color: white;
        }

        .label {
            font-size: 26px;
            font-weight: 800;
            margin: 35px 0 20px 5px;
            color: #000000;
        }

        .book-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
        }

        .book-card {
            aspect-ratio: 2/3;
            border-radius: 20px;
            background-size: cover;
            background-position: center;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: 0.3s;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .book-card:hover {
            transform: translateY(-8px);
        }

        .edu-section {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .edu-section.active {
            display: block;
        }

        .edu-card {
            background: #FFFFFF;
            padding: 30px;
            border-radius: 25px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.02);
            margin-bottom: 20px;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .edu-card:hover {
            transform: scale(1.02);
        }

        .edu-title {
            font-size: 24px;
            font-weight: 800;
            color: #000000;
        }

        .edu-icon {
            font-size: 30px;
            opacity: 0.5;
        }

        .vocab-list {
            display: grid;
            gap: 10px;
        }

        .vocab-item {
            background: #FFFFFF;
            padding: 15px 20px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.02);
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .v-word {
            font-weight: 800;
            font-size: 18px;
            color: #000000;
            margin-bottom: 4px;
        }

        .v-def {
            font-size: 14px;
            color: #333333;
            line-height: 1.4;
        }

        .back-btn-edu {
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 700;
            color: #000000;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            opacity: 0.8;
        }

        .podcast-list {
            display: grid;
            gap: 20px;
        }

        .podcast-item {
            display: flex;
            background: #FFFFFF;
            border-radius: 25px;
            overflow: hidden;
            text-decoration: none;
            color: #000000;
            box-shadow: 0 2px 15px rgba(0,0,0,0.02);
            transition: 0.3s;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .podcast-thumb {
            width: 140px;
            height: 140px;
            background-size: cover;
            flex-shrink: 0;
        }

        .podcast-body {
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .podcast-body h3 {
            margin: 0 0 8px 0;
            color: #000000;
        }

        .podcast-body span {
            color: #333333;
        }

        .home-footer {
            margin-top: 120px;
            margin-bottom: 40px;
            padding: 25px;
            text-align: center;
            background: #FFFFFF;
            border-radius: 25px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.02);
            max-width: 320px;
            margin-left: auto;
            margin-right: auto;
            color: #000000;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .home-footer .soc-title {
            font-weight: 800;
            font-size: 14px;
            color: #333333;
            margin-bottom: 15px;
        }

        .soc-row {
            display: flex;
            justify-content: center;
            gap: 12px;
        }

        .soc-circle {
            width: 55px;
            height: 55px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.3s;
            color: white;
            text-decoration: none;
        }

        .soc-circle svg {
            width: 28px;
            height: 28px;
            fill: currentColor;
        }

        .tg-c {
            background: #26A5E4;
        }

        .ig-c {
            background: radial-gradient(circle at 30% 107%, #fdf497 0%, #fd5949 45%, #d6249f 60%, #285AEB 90%);
        }

        .yt-c {
            background: #FF0000;
        }

        .sub-card {
            background: #FFFFFF;
            border-radius: 25px;
            padding: 25px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.02);
            margin-bottom: 20px;
            color: #000000;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .theme-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
        }

        .theme-btn {
            padding: 15px;
            border-radius: 15px;
            border: 2.5px solid transparent;
            background: #FFFFFF;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            color: #000000;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .theme-btn.active {
            border-color: #D9B99B;
            background: #FFFFFF;
        }

        .color-dot {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            border: 1px solid rgba(0,0,0,0.1);
        }

        textarea {
            width: 100%;
            height: 150px;
            border: none;
            outline: none;
            background: transparent;
            font-family: inherit;
            font-size: 16px;
            color: #000000;
            resize: none;
        }

        textarea::placeholder {
            color: #666666;
        }

        .spacer {
            height: 100px;
        }
    </style>
</head>

<body>
    <nav class="top-nav">
        <div class="nav-content">
            <div class="logo" onclick="switchTab('home-view', 'n-h')">LUMINARY</div>
            <div class="nav-links">
                <button class="nav-item active" id="n-h" onclick="switchTab('home-view', 'n-h')">
                    <svg viewBox="0 0 24 24">
                        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                    </svg>
                    –î–æ–º
                </button>
                <button class="nav-item" id="n-e" onclick="switchTab('edu-view', 'n-e')">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 3L1 9l11 6 9-4.91V17h2V9L12 3z" />
                    </svg>
                    –û–±—É—á–µ–Ω–∏–µ
                </button>
                <button class="nav-item" id="n-a" onclick="switchTab('audio-view', 'n-a')">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 1c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h3c1.66 0 3-1.34 3-3v-7c0-4.97-4.03-9-9-9z" />
                    </svg>
                    –ê—É–¥–∏–æ
                </button>
                <button class="nav-item" id="n-u" onclick="switchTab('user-view', 'n-u')">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                    </svg>
                    –ü—Ä–æ—Ñ–∏–ª—å
                </button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div id="home-view" class="view active">
            <div class="search-bar">
                <input type="text" placeholder="–ü–æ–∏—Å–∫ –∫–Ω–∏–≥..." oninput="handleSearch(event)">
            </div>
            <div id="hero-banner" class="hero">
                <div class="hero-overlay"></div>
                <div class="hero-text">
                    <h2 id="hero-title">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                    <p>–ù–∞–∂–º–∏, —á—Ç–æ–±—ã —á–∏—Ç–∞—Ç—å</p>
                </div>
            </div>
            <div class="label">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</div>
            <div id="book-grid" class="book-grid"></div>

            <div class="home-footer">
                <div class="soc-title">–ú–´ –í –°–û–¶–°–ï–¢–Ø–•</div>
                <div class="soc-row">
                    <a href="#" class="soc-circle tg-c" aria-label="Telegram">
                        <svg viewBox="0 0 24 24">
                            <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z" />
                        </svg>
                    </a>
                    <a href="#" class="soc-circle ig-c" aria-label="Instagram">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
                        </svg>
                    </a>
                    <a href="#" class="soc-circle yt-c" aria-label="YouTube">
                        <svg viewBox="0 0 24 24">
                            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" />
                        </svg>
                    </a>
                </div>
            </div>
            <div class="spacer"></div>
        </div>

        <div id="edu-view" class="view">
            <div id="edu-main" class="edu-section active">
                <div class="label">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
                <div class="edu-card" onclick="openEduLevel('edu-sat')">
                    <div class="edu-title">SAT Prep</div>
                    <div class="edu-icon">üìö</div>
                </div>
                <div class="edu-card" onclick="openEduLevel('edu-ielts')">
                    <div class="edu-title">IELTS</div>
                    <div class="edu-icon">üéì</div>
                </div>
            </div>

            <div id="edu-sat" class="edu-section">
                <button class="back-btn-edu" onclick="openEduLevel('edu-main')">‚Üê –ù–∞–∑–∞–¥</button>
                <div class="edu-card" onclick="openEduLevel('edu-vocab')">
                    <div class="edu-title">Vocabulary</div>
                    <div class="edu-icon">üìñ</div>
                </div>
            </div>

            <div id="edu-ielts" class="edu-section">
                <button class="back-btn-edu" onclick="openEduLevel('edu-main')">‚Üê –ù–∞–∑–∞–¥</button>
                <div class="sub-card">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã IELTS –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ...</div>
            </div>

            <div id="edu-vocab" class="edu-section">
                <button class="back-btn-edu" onclick="openEduLevel('edu-sat')">‚Üê –ù–∞–∑–∞–¥</button>
                <div class="label">400+ SAT Words</div>
                <div class="vocab-list" id="vocab-list"></div>
            </div>
            <div class="spacer"></div>
        </div>

        <div id="audio-view" class="view">
            <div class="label">–ü–æ–¥–∫–∞—Å—Ç—ã</div>
            <div class="podcast-list" id="podcast-container"></div>
            <div class="spacer"></div>
        </div>

        <div id="user-view" class="view">
            <div class="label">–ú–æ–∏ –∑–∞–º–µ—Ç–∫–∏</div>
            <div class="sub-card">
                <textarea id="notes-area" oninput="saveNotes()" placeholder="–ü–∏—à–∏ —Ç—É—Ç..."></textarea>
            </div>
            <div class="label">–¢–µ–º—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</div>
            <div class="theme-grid" id="theme-grid"></div>
            <div class="spacer"></div>
        </div>
    </div>

    <div id="reader-view" class="reader-view">
        <div class="reader-header">
            <div class="back-arrow" onclick="closeBook()">
                <svg viewBox="0 0 24 24">
                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                </svg>
            </div>
            <div id="reader-book-title" style="font-weight:800; color: #000000;"></div>
        </div>
        <div class="reader-body">
            <div class="touch-zone-left" onclick="animatePageChange(-1)"></div>
            <div class="touch-zone-right" onclick="animatePageChange(1)"></div>
            <div id="page-content" class="page-content page-active"></div>
        </div>
    </div>

    <script>
        // --- –î–ê–ù–ù–´–ï ---
        const books = [
            {
                t: "Steve Jobs",
                a: "Walter Isaacson",
                i: "https://is1-ssl.mzstatic.com/image/thumb/Publication114/v4/59/7e/03/597e0370-4d18-cc3d-09e3-3e7c6434e168/9781451648553.jpg/600x600w.png",
                pages: [
                    "–°—Ç–∏–≤ –î–∂–æ–±—Å –∏–∑–º–µ–Ω–∏–ª –º–∏—Ä —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π. –ï–≥–æ –≤–∏–¥–µ–Ω–∏–µ —Å–¥–µ–ª–∞–ª–æ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏, –∞ —Ç–µ–ª–µ—Ñ–æ–Ω—ã ‚Äî —É–º–Ω—ã–º–∏.",
                    "–û–Ω –æ—Å–Ω–æ–≤–∞–ª Apple –≤ –≥–∞—Ä–∞–∂–µ —Å–≤–æ–µ–≥–æ –æ—Ç—Ü–∞ –≤ 1976 –≥–æ–¥—É –≤–º–µ—Å—Ç–µ —Å–æ –°—Ç–∏–≤–æ–º –í–æ–∑–Ω—è–∫–æ–º.",
                    "–î–∂–æ–±—Å –±—ã–ª –∏–∑–≤–µ—Å—Ç–µ–Ω —Å–≤–æ–∏–º —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–µ–º –∫ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤—É, –¥–∞–∂–µ –≤ —Ç–µ—Ö –¥–µ—Ç–∞–ª—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏–∫—Ç–æ –Ω–µ –≤–∏–¥–µ–ª."
                ]
            },
            {
                t: "Elon Musk",
                a: "Walter Isaacson",
                i: "https://is1-ssl.mzstatic.com/image/thumb/Publication126/v4/d4/c7/84/d4c78414-6599-e723-71de-837a0197dbd9/9781982181307.jpg/600x630w.png",
                pages: [
                    "–ò–ª–æ–Ω –ú–∞—Å–∫ –º–µ—á—Ç–∞–µ—Ç –æ –ú–∞—Ä—Å–µ. –ï–≥–æ –∫–æ–º–ø–∞–Ω–∏—è SpaceX –ø–µ—Ä–≤–æ–π —Å–æ–∑–¥–∞–ª–∞ –º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤—ã–µ —Ä–∞–∫–µ—Ç—ã.",
                    "Tesla –ø–µ—Ä–µ–≤–µ—Ä–Ω—É–ª–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–π —Ä—ã–Ω–æ–∫, –¥–æ–∫–∞–∑–∞–≤, —á—Ç–æ —ç–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∫—Ä—É—Ç—ã–º–∏.",
                    "–ú–∞—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ 100 —á–∞—Å–æ–≤ –≤ –Ω–µ–¥–µ–ª—é –∏ —Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ —Ä–∏—Å–∫ ‚Äî —ç—Ç–æ –ø—É—Ç—å –∫ –ø—Ä–æ–≥—Ä–µ—Å—Å—É."
                ]
            },
            {
                t: "Atomic Habits",
                a: "James Clear",
                i: "https://is1-ssl.mzstatic.com/image/thumb/Publication221/v4/1f/1b/d3/1f1bd34a-aa29-25e8-b133-7e19b38a5702/9780735211308.d.jpg/600x630w.png",
                pages: [
                    "–ü—Ä–∏–≤—ã—á–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç –Ω–∞—à—É –ª–∏—á–Ω–æ—Å—Ç—å. –ú–∞–ª–µ–Ω—å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–µ–¥—É—Ç –∫ –±–æ–ª—å—à–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º.",
                    "1% –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –¥–µ–ª–∞–µ—Ç –≤–∞—Å –≤ 37 —Ä–∞–∑ –ª—É—á—à–µ —á–µ—Ä–µ–∑ –≥–æ–¥.",
                    "–°–∏—Å—Ç–µ–º–∞ –≤–∞–∂–Ω–µ–µ —Ü–µ–ª–µ–π. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É—Å–ø–µ—Ö–∞, —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Ç–µ—Å—å –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö."
                ]
            },
            {
                t: "Pride and Prejudice",
                a: "Jane Austen",
                i: "https://m.media-amazon.com/images/I/81Ww6H2kE6L.jpg",
                pages: [
                    "–ì–ª–∞–≤–∞ 1\n\n–≠—Ç–æ –∏—Å—Ç–∏–Ω–∞, –Ω–µ —Ç—Ä–µ–±—É—é—â–∞—è –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤: –≤–ª–∞–¥–µ–ª–µ—Ü –∫—Ä—É–ø–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ–ø—Ä–µ–º–µ–Ω–Ω–æ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –∂–µ–Ω–µ.\n\n–ö–∞–∫–∏–º –±—ã –º–∞–ª–æ–∏–∑–≤–µ—Å—Ç–Ω—ã–º –Ω–∏ –±—ã–ª —ç—Ç–æ—Ç —á–µ–ª–æ–≤–µ–∫, –∫–æ–≥–¥–∞ –æ–Ω –ø–µ—Ä–µ–µ–∑–∂–∞–µ—Ç –≤ –Ω–æ–≤–æ–µ –≥—Ä–∞—Ñ—Å—Ç–≤–æ, –º–µ—Å—Ç–Ω—ã–µ —Å–µ–º—å–∏ —Å—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞—é—Ç –≤–∏–¥–µ—Ç—å –≤ –Ω—ë–º –∑–∞–∫–æ–Ω–Ω—É—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–π –∏–∑ —Å–≤–æ–∏—Ö –¥–æ—á–µ—Ä–µ–π.",
                    "–ì–ª–∞–≤–∞ 2\n\n–ú–∏—Å—Ç–µ—Ä –ë–µ–Ω–Ω–µ—Ç –±—ã–ª –æ–¥–Ω–∏–º –∏–∑ –ø–µ—Ä–≤—ã—Ö, –∫—Ç–æ –Ω–∞–≤–µ—Å—Ç–∏–ª –º–∏—Å—Ç–µ—Ä–∞ –ë–∏–Ω–≥–ª–∏. –û–Ω –≤—Å–µ–≥–¥–∞ –¥–µ–ª–∞–ª –≤–∏–¥, —á—Ç–æ –Ω–µ —Ö–æ—á–µ—Ç —ç—Ç–æ–≥–æ, –Ω–æ –≤ –∏—Ç–æ–≥–µ –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–æ—à—ë–ª.\n\n–ï–≥–æ –∂–µ–Ω–∞ –∏ –ø—è—Ç—å –¥–æ—á–µ—Ä–µ–π –Ω–µ –º–æ–≥–ª–∏ –¥–æ–∂–¥–∞—Ç—å—Å—è –Ω–æ–≤–æ—Å—Ç–µ–π. –ú–∏—Å—Å–∏—Å –ë–µ–Ω–Ω–µ—Ç –Ω–µ —Å–∫—Ä—ã–≤–∞–ª–∞ —Å–≤–æ–µ–≥–æ –≤–æ—Å—Ç–æ—Ä–≥–∞: ¬´–Ø —Ç–∞–∫ —Ä–∞–¥–∞! –ú–∏—Å—Ç–µ—Ä –ë–∏–Ω–≥–ª–∏ —Ç–∞–∫–æ–π –ø—Ä–∏—è—Ç–Ω—ã–π –º–æ–ª–æ–¥–æ–π —á–µ–ª–æ–≤–µ–∫!¬ª",
                    "–ì–ª–∞–≤–∞ 3\n\n–ú–∏—Å—Ç–µ—Ä –ë–∏–Ω–≥–ª–∏ –æ—Ç–≤–µ—Ç–∏–ª –Ω–∞ –≤–∏–∑–∏—Ç –º–∏—Å—Ç–µ—Ä–∞ –ë–µ–Ω–Ω–µ—Ç–∞. –û–Ω –±—ã–ª –º–æ–ª–æ–¥, –∫—Ä–∞—Å–∏–≤, –æ–±—Ö–æ–¥–∏—Ç–µ–ª–µ–Ω ‚Äî –∏, —á—Ç–æ —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ, —Ö–æ–ª–æ—Å—Ç. –í—Å–∫–æ—Ä–µ –≤–µ—Å—å –ú–µ—Ä—Ç–æ–Ω —Ç–æ–ª—å–∫–æ –∏ –≥–æ–≤–æ—Ä–∏–ª, —á—Ç–æ –æ –Ω—ë–º.\n\n–ù–∞ –±–∞–ª—É –≤ –ú–µ—Ä–∏—Ç–æ–Ω–µ –º–∏—Å—Ç–µ—Ä –ë–∏–Ω–≥–ª–∏ –ø—Ä–æ–∏–∑–≤—ë–ª —Ñ—É—Ä–æ—Ä. –û–Ω —Ç–∞–Ω—Ü–µ–≤–∞–ª —Å –∫–∞–∂–¥–æ–π –Ω–µ–∑–∞–º—É–∂–Ω–µ–π –¥–µ–≤—É—à–∫–æ–π, –Ω–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤—ã–¥–µ–ª—è–ª —Å—Ç–∞—Ä—à—É—é –¥–æ—á—å –ë–µ–Ω–Ω–µ—Ç–æ–≤ ‚Äî –î–∂–µ–π–Ω.",
                    "–ï–≥–æ –¥—Ä—É–≥, –º–∏—Å—Ç–µ—Ä –î–∞—Ä—Å–∏, –Ω–∞–ø—Ä–æ—Ç–∏–≤, –∫–∞–∑–∞–ª—Å—è –≥–æ—Ä–¥—ã–º –∏ –Ω–∞–¥–º–µ–Ω–Ω—ã–º. –û–Ω –Ω–µ —Ç–∞–Ω—Ü–µ–≤–∞–ª –Ω–∏ —Å –∫–µ–º, –∫—Ä–æ–º–µ –º–∏—Å—Å –ë–∏–Ω–≥–ª–∏, –∏ –∑–∞—è–≤–∏–ª, —á—Ç–æ ¬´–≤—Å–µ –º–µ—Å—Ç–Ω—ã–µ –¥–µ–≤—É—à–∫–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ—Ä–æ—à–∏ –¥–ª—è –Ω–µ–≥–æ¬ª. –≠–ª–∏–∑–∞–±–µ—Ç –ë–µ–Ω–Ω–µ—Ç —Å–ª—ã—à–∞–ª–∞ —ç—Ç–æ –∏ —Ä–µ—à–∏–ª–∞, —á—Ç–æ –æ–Ω —Å–∞–º—ã–π –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã–π —á–µ–ª–æ–≤–µ–∫ –≤ –º–∏—Ä–µ.",
                    "–ú–∏—Å—Ç–µ—Ä –ë–∏–Ω–≥–ª–∏ –≤–ª—é–±–∏–ª—Å—è –≤ –î–∂–µ–π–Ω —Å –ø–µ—Ä–≤–æ–≥–æ –≤–∑–≥–ª—è–¥–∞. –û–Ω–∞ –±—ã–ª–∞ –∫—Ä–∞—Å–∏–≤–∞, –¥–æ–±—Ä–∞ –∏ —Å–∫—Ä–æ–º–Ω–∞. –ù–æ –º–∏—Å—Å–∏—Å –ë–µ–Ω–Ω–µ—Ç —É–∂–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–∞ —Å–≤–∞–¥—å–±—É, –∞ –º–∏—Å—Ç–µ—Ä –ë–µ–Ω–Ω–µ—Ç –ª–∏—à—å –ø–æ—Å–º–µ–∏–≤–∞–ª—Å—è: ¬´–ë–µ–¥–Ω—ã–π –º–∏—Å—Ç–µ—Ä –ë–∏–Ω–≥–ª–∏! –ï–º—É –Ω–µ —Å–ø–∞—Å—Ç–∏—Å—å¬ª. –≠–ª–∏–∑–∞–±–µ—Ç –Ω–∞–±–ª—é–¥–∞–ª–∞ –∑–∞ —Å–µ—Å—Ç—Ä–æ–π –∏ –Ω–∞–¥–µ—è–ª–∞—Å—å, —á—Ç–æ –µ—ë —Å–µ—Ä–¥—Ü–µ –Ω–µ —Ä–∞–∑–æ–±—å—é—Ç.",
                    "–ú–∏—Å—Ç–µ—Ä –î–∞—Ä—Å–∏ —Ç–æ–∂–µ –∑–∞–º–µ—Ç–∏–ª –≠–ª–∏–∑–∞–±–µ—Ç. –û–Ω –Ω–∞—Ö–æ–¥–∏–ª –µ—ë –ª–∏—Ü–æ ¬´–º–∏–ª—ã–º¬ª –∏ –≥–ª–∞–∑–∞ ¬´—É–º–Ω—ã–º–∏¬ª, –Ω–æ –µ–≥–æ –≥–æ—Ä–¥–æ—Å—Ç—å –Ω–µ –ø–æ–∑–≤–æ–ª—è–ª–∞ –µ–º—É –ø—Ä–∏–∑–Ω–∞—Ç—å—Å—è –≤ —ç—Ç–æ–º –¥–∞–∂–µ —Å–µ–±–µ. –≠–ª–∏–∑–∞–±–µ—Ç –∂–µ —Å—á–∏—Ç–∞–ª–∞ –µ–≥–æ –ø–æ—Å–ª–µ–¥–Ω–∏–º —á–µ–ª–æ–≤–µ–∫–æ–º, –∑–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –æ–Ω–∞ –≤—ã—à–ª–∞ –±—ã –∑–∞–º—É–∂."
                ]
            }
        ];

        const podcasts = [
            { t: "–ß—É–≤—Å—Ç–≤–æ –∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", u: "https://youtu.be/FJzqGLflxXA", i: "https://img.youtube.com/vi/FJzqGLflxXA/mqdefault.jpg" },
            { t: "–ë—Ä–∏–¥–∂–µ—Ä—Ç–æ–Ω—ã: –ß–∞—Å—Ç—å 1", u: "https://youtu.be/2m7TkhXrCo0", i: "https://img.youtube.com/vi/2m7TkhXrCo0/mqdefault.jpg" },
            { t: "–ë—Ä–∏–¥–∂–µ—Ä—Ç–æ–Ω—ã: –ß–∞—Å—Ç—å 2", u: "https://youtu.be/wNozq1sYBdY", i: "https://img.youtube.com/vi/wNozq1sYBdY/mqdefault.jpg" },
            { t: "–ù–ò –°–´ (–ú–æ—Ç–∏–≤–∞—Ü–∏—è)", u: "https://youtu.be/eCt8Yq6xLVM", i: "https://img.youtube.com/vi/eCt8Yq6xLVM/mqdefault.jpg" }
        ];

        const satWords = [
            { w: "Illusory", d: "Based on illusion; not real or true; deceptive." },
            { w: "Imposing", d: "Grand and impressive in appearance." },
            { w: "Ingenious", d: "Clever, original, and inventive." },
            { w: "Meticulous", d: "Showing great attention to detail; very careful." },
            { w: "Pristine", d: "In its original condition; unspoiled or clean." }
        ];

        const themes = [
            { id: 'beige', n: 'Beige', bg: '#FFF0DB', card: '#FFFFFF', text: '#000000', textCard: '#000000', acc: '#D9B99B' },
            { id: 'dark', n: 'Dark', bg: '#1d1f2f', card: '#252a3d', text: '#FFFFFF', textCard: '#FFFFFF', acc: '#0078D4' },
            { id: 'navy', n: 'Navy', bg: '#1a2744', card: '#243b55', text: '#FFFFFF', textCard: '#FFFFFF', acc: '#60a5fa' },
            { id: 'slate', n: 'Slate', bg: '#334155', card: '#475569', text: '#FFFFFF', textCard: '#FFFFFF', acc: '#94a3b8' },
            { id: 'steel', n: 'Steel Blue', bg: '#1e3a5f', card: '#2c5282', text: '#FFFFFF', textCard: '#FFFFFF', acc: '#0078D4' },
            { id: 'orange', n: 'Amber', bg: '#431407', card: '#7c2d12', text: '#FFFFFF', textCard: '#FFFFFF', acc: '#f59e0b' },
            { id: 'black', n: 'Black', bg: '#1A1A1A', card: '#333333', text: '#FFFFFF', textCard: '#FFFFFF', acc: '#FFFFFF' }
        ];

        let currentBookIdx = 0;
        let currentPageIdx = 0;
        let isAnimating = false;
        let heroClickHandler = null;

        // FIXED: Renamed to switchTab to match HTML onclick calls
        function switchTab(viewId, buttonId) {
            document.querySelectorAll('.view').forEach(view => {
                view.classList.remove('active');
            });
            
            document.getElementById(viewId).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(buttonId).classList.add('active');
        }

        function openEduLevel(id) {
            document.querySelectorAll('.edu-section').forEach(x => x.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function openBook(idx) {
            currentBookIdx = idx;
            currentPageIdx = 0;
            document.getElementById('reader-book-title').innerText = books[idx].t;
            document.getElementById('reader-view').style.display = 'flex';
            renderPage();
        }

        function closeBook() {
            document.getElementById('reader-view').style.display = 'none';
        }

        function animatePageChange(dir) {
            if (isAnimating) return;
            let book = books[currentBookIdx];
            let newPage = currentPageIdx + dir;

            if (newPage < 0) {
                alert("–≠—Ç–æ –Ω–∞—á–∞–ª–æ –∫–Ω–∏–≥–∏");
                return;
            }
            if (newPage >= book.pages.length) {
                alert("–ö–Ω–∏–≥–∞ –æ–∫–æ–Ω—á–µ–Ω–∞");
                return;
            }

            isAnimating = true;
            const content = document.getElementById('page-content');

            content.classList.remove('page-active');
            content.classList.add(dir > 0 ? 'page-enter-left' : 'page-enter-right');

            setTimeout(() => {
                currentPageIdx = newPage;
                renderPage();

                content.classList.remove('page-enter-left', 'page-enter-right');
                content.classList.add(dir > 0 ? 'page-enter-right' : 'page-enter-left');

                setTimeout(() => {
                    content.classList.add('page-active');
                    content.classList.remove('page-enter-right', 'page-enter-left');
                    isAnimating = false;
                }, 50);
            }, 400);
        }

        function renderPage() {
            document.getElementById('page-content').innerText = books[currentBookIdx].pages[currentPageIdx];
        }

        function setTheme(id) {
            const t = themes.find(x => x.id === id);
            document.documentElement.style.setProperty('--bg-page', t.bg);
            document.documentElement.style.setProperty('--bg-card', t.card);
            document.documentElement.style.setProperty('--text-main', t.text);
            document.documentElement.style.setProperty('--text-on-card', t.textCard);
            document.documentElement.style.setProperty('--accent', t.acc);
            localStorage.setItem('lum_theme', id);
            renderThemeGrid();
        }

        function renderThemeGrid() {
            const curr = localStorage.getItem('lum_theme') || 'beige';
            document.getElementById('theme-grid').innerHTML = themes.map(t => `
                <div class="theme-btn ${t.id === curr ? 'active' : ''}" onclick="setTheme('${t.id}')">
                    <div class="color-dot" style="background:${t.bg}"></div> ${t.n}
                </div>
            `).join('');
        }

        function renderBooks(arr) {
            document.getElementById('book-grid').innerHTML = arr.map((b, i) => `
                <div class="book-card" style="background-image:url('${b.i}')" onclick="openBook(${i})"></div>
            `).join('');
        }

        function renderContent() {
            document.getElementById('vocab-list').innerHTML = satWords.map(w => `
                <div class="vocab-item">
                    <div class="v-word">${w.w}</div>
                    <div class="v-def">${w.d}</div>
                </div>
            `).join('');
            document.getElementById('podcast-container').innerHTML = podcasts.map(p => `
                <a href="${p.u}" target="_blank" class="podcast-item">
                    <div class="podcast-thumb" style="background-image:url('${p.i}')"></div>
                    <div class="podcast-body">
                        <h3>${p.t}</h3>
                        <span>–°–ª—É—à–∞—Ç—å –Ω–∞ YouTube</span>
                    </div>
                </a>
            `).join('');
        }

        function handleSearch(e) {
            const q = e.target.value.toLowerCase();
            renderBooks(books.filter(b => b.t.toLowerCase().includes(q)));
        }

        function saveNotes() {
            localStorage.setItem('lum_notes', document.getElementById('notes-area').value);
        }

        // FIXED: Update hero banner properly
        function updateHeroBanner(idx) {
            const heroBanner = document.getElementById('hero-banner');
            heroBanner.style.backgroundImage = `url('${books[idx].i}')`;
            document.getElementById('hero-title').innerText = books[idx].t;
            
            // Remove old click handler
            if (heroClickHandler) {
                heroBanner.removeEventListener('click', heroClickHandler);
            }
            
            // Add new click handler
            heroClickHandler = function() { openBook(idx); };
            heroBanner.addEventListener('click', heroClickHandler);
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–Ω–∏–≥–∏ –∏–∑ –ø–∞–ø–∫–∏ books
        async function loadPrideAndPrejudice() {
            const chapters = [];
            let chapterNum = 1;
            
            while (true) {
                try {
                    const response = await fetch(`books/glava${chapterNum}.txt`);
                    if (!response.ok) break;
                    const text = await response.text();
                    chapters.push(text);
                    chapterNum++;
                } catch {
                    break;
                }
            }
            
            if (chapters.length > 0) {
                books.push({
                    t: "–ì–æ—Ä–¥–æ—Å—Ç—å –∏ –ø—Ä–µ–¥—É–±–µ–∂–¥–µ–Ω–∏–µ",
                    a: "–î–∂–µ–π–Ω –û—Å—Ç–∏–Ω",
                    i: "https://m.media-amazon.com/images/I/81Ww6H2kE6L.jpg",
                    pages: chapters
                });
                renderBooks(books);
            }
        }

        // INITIALIZATION
        renderBooks(books);
        renderContent();
        renderThemeGrid();
        document.getElementById('notes-area').value = localStorage.getItem('lum_notes') || "";
        setTheme(localStorage.getItem('lum_theme') || 'beige');

        // Set initial hero banner
        updateHeroBanner(0);

        // Load additional book
        loadPrideAndPrejudice();

        // Hero banner rotation
        let hIdx = 0;
        setInterval(() => {
            hIdx = (hIdx + 1) % books.length;
            updateHeroBanner(hIdx);
        }, 5000);
    </script>
</body>
</html>
